<div class="container" ng-controller="SettingsController as settings">
    <div class="row">
        <div class="col-4 mt-5">
            <h3 class="mb-5" translate="settings.header">Account settings</h3>


            <p ng-show="settings.settingsFormSubmitted && settings.updateFormServerError" class="text-danger" translate="settings.invalidData">The given data was invalid</p>
            <p ng-show="settings.settingsFormSubmitted && settings.updateFormServerSuccess" class="text-success" translate="settings.updateSuccess">Settings successfully updated</p>


            <span class="mr-4" translate="settings.interfaceLang">Interface language: </span>
            <select class="custom-select" ng-model="settings.currentLang" ng-click="settings.changeLanguage()">
                <option ng-repeat="language in settings.availableLang" value="{{language}}">
                    {{language}}
                </option>
            </select>

            <img class="d-block w-25" ng-src="{{settings.update.avatar}}" alt="{{settings.update.name}}">

            <div class="input-group mt-3">
                <label class="custom-file">
                    <input type="file" id="file2" class="custom-file-input" ng-model="settings.update.fileAvatar">
                    <span class="custom-file-control"></span>
                </label>
            </div>

            <div class="input-group mt-3">
                <input type="text" class="form-control auth-input" ng-class="{'auth-input-error' : ''}" placeholder="{{ 'settings.linkAvatar' | translate }}" aria-label="Avatar" name="avatar" ng-change="settings.setAvatarByLink()" ng-model="settings.avatarLink" >
                <i class="auth-input-icon mdi mdi-link"></i>
            </div>






            <form name="settingsForm" class="mt-2 w-75 d-inline-block text-center" novalidate>


                <div class="input-group mt-3">
                    <input type="text" class="form-control auth-input" ng-class="{'auth-input-error' : settingsForm.name.$invalid && settingsForm.name.$dirty || settingsForm.name.$invalid && settings.settingsFormSubmitted}" placeholder="{{ 'settings.inputName' | translate }}" aria-label="Name" name="name" ng-model="settings.update.name" ng-minlength="2" ng-maxlength="15" >
                    <i class="auth-input-icon mdi mdi-account"></i>
                </div>
                <span ng-show="settingsForm.name.$invalid && settingsForm.name.$dirty || settingsForm.name.$invalid && settings.settingsFormSubmitted" class="text-danger auth-required-error" translate="settings.inputNameErr">The name field can contain from 2 to 10 characters</span>
                <div class="input-group mt-3">
                    <input type="text" class="form-control auth-input" ng-class="{'auth-input-error' : settingsForm.surname.$invalid && settingsForm.surname.$dirty || settingsForm.surname.$invalid && settings.settingsFormSubmitted}" placeholder="{{ 'settings.inputSurname' | translate }}" aria-label="Surname" name="surname" ng-model="settings.update.surname" ng-minlength="3" ng-maxlength="20" >
                    <i class="auth-input-icon mdi mdi-account"></i>
                </div>
                <span ng-show="settingsForm.surname.$invalid && settingsForm.surname.$dirty || settingsForm.surname.$invalid && settings.settingsFormSubmitted" class="text-danger auth-required-error" translate="settings.inputSurnameErr">The surname field can contain from 2 to 10 characters</span>





                <div class="input-group mt-3">
                    <input type="email" class="form-control auth-input" ng-class="{'auth-input-error' : settingsForm.email.$invalid && settingsForm.email.$dirty || settingsForm.email.$invalid && settings.settingsFormSubmitted}" placeholder="{{ 'settings.inputEmail' | translate }}" aria-label="Email address" name="email" ng-model="settings.update.email" ng-pattern="/^[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,4}$/" >
                    <i class="auth-input-icon mdi mdi-email"></i>
                </div>
                <span ng-show="settingsForm.email.$invalid && settingsForm.email.$dirty || settingsForm.email.$invalid && settings.settingsFormSubmitted" class="text-danger auth-required-error" translate="settings.inputEmailErr">The email field must have a valid email</span>






                <div class="input-group mt-3">
                    <input type="password" class="form-control auth-input" ng-class="{'auth-input-error' : settingsForm.password.$invalid && settingsForm.password.$dirty || settingsForm.password.$invalid && settings.settingsFormSubmitted}" placeholder="{{ 'settings.inputPass' | translate }}" aria-label="Password" name="password" ng-model="settings.update.password" >
                    <i class="auth-input-icon mdi mdi-lock"></i>
                </div>
                <span ng-show="settingsForm.password.$invalid && settingsForm.password.$dirty || settingsForm.password.$invalid && settings.settingsFormSubmitted" class="text-danger auth-required-error" translate="settings.inputPassErr">The password field is required</span>
                <div class="input-group mt-3">
                    <input type="password" class="form-control auth-input" ng-class="{'auth-input-error' : settingsForm.password.$dirty && settingsForm.password_confirmation.$dirty && settings.update.password_confirmation !== settings.update.password || settings.settingsFormSubmitted && settingsForm.password.$touched && settings.update.password_confirmation !== settings.update.password}" placeholder="{{ 'settings.inputConfPass' | translate }}" aria-label="Confirm password" name="password_confirmation" ng-model="settings.update.password_confirmation" >
                    <i class="auth-input-icon mdi mdi-lock"></i>
                </div>
                <span ng-show="settingsForm.password.$dirty && settingsForm.password_confirmation.$dirty && settings.update.password_confirmation !== settings.update.password || settings.settingsFormSubmitted && settingsForm.password.$touched && settings.update.password_confirmation !== settings.update.password" class="text-danger auth-required-error" translate="settings.inputConfPassErr">Password confirmation does not match</span>




                <div class="input-group mt-3">
                    <input type="password" class="form-control auth-input" ng-class="{'auth-input-error' : settingsForm.current_password.$invalid && settingsForm.current_password.$dirty && !settings.updateFormServerSuccess || settingsForm.current_password.$invalid && settings.settingsFormSubmitted && !settings.updateFormServerSuccess}" placeholder="{{ 'settings.inputCurrPass' | translate }}" aria-label="Current Password" name="current_password" ng-model="settings.update.current_password" ng-minlength="4" required >
                    <i class="auth-input-icon mdi mdi-lock"></i>
                </div>
                <span ng-show="settingsForm.current_password.$invalid && settingsForm.current_password.$dirty && !settings.updateFormServerSuccess || settingsForm.current_password.$invalid && settings.settingsFormSubmitted && !settings.updateFormServerSuccess" class="text-danger auth-required-error d-block" translate="settings.inputCurrPassErr">Current password is not correct</span>
                <span class="text-danger">* <span class="text-muted auth-required-field" translate="settings.enterCurrPassword">for update settings you must enter current password</span></span>








            </form>
            <button class="mt-4 w-50 btn btn-primary" ng-click="settings.updateSettings(settingsForm.$valid)" translate="settings.updateSettings">Sign up</button>

        </div>
    </div>
</div>